# ─────────────────────────────────────────────
# Citadel-Chat: Local Development with Docker
# ─────────────────────────────────────────────
# Usage: docker compose up --build
# ─────────────────────────────────────────────

services:
  citadel-chat:
    build: .
    ports:
      - "8000:8000"
    environment:
      - PORT=8000
      - SECRET_KEY=citadel_master_key_change_me
      - GROQ_API_KEY=${GROQ_API_KEY}
      - GROQ_MODEL=llama-3.3-70b-versatile
      - EMBEDDING_MODEL=all-MiniLM-L6-v2
    volumes:
      - citadel-uploads:/app/citadel_vault
      - citadel-memory:/app/citadel_memory
      - citadel-db:/app
    restart: unless-stopped

volumes:
  citadel-uploads:
  citadel-memory:
  citadel-db:
